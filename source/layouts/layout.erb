<!DOCTYPE html>
<%
  page_title = yield_if_set(:page_title, current_page.data.page_title)
  page_description = :page_description
%>
<html lang="<%= data.site.lang || 'en' %>">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%= partial 'partials/head_title' %>
    <%= partial 'partials/head_stylesheets' %>
    <%= partial 'partials/head_preload' %>
    <%= partial 'partials/head_dns_prefetch' %>
    <%= partial 'partials/head_pwa' %>
    <%= partial 'partials/head_opengraph', locals: {:page_title => page_title, :page_description => page_description} %>
  </head>
  <body class="<%= get_page_class() %>">
    <header>
      <h1><a href="<%= config[:base_url] %>"><%= data.site.name %></a></h1>
    </header>
    <%= partial 'partials/main_menu' %>
    <%= partial 'partials/body_notices' if data.content.include? 'notices' %>
    <article>
      <% if content_for? :page_heading %>
      <header>
        <h1><%= yield_content :page_heading %></h1>
        <% if content_for? :page_intro %>
        <p><%= yield_content :page_intro %></p>
        <% end %>
      </header>
      <% end %>
      <%= yield %>
    </article>
    <% if current_page.url == '/' %>
    <script src="<%= asset_path(:js, 'script.home') %>"></script>
    <% end %>
    <script src="<%= asset_path(:js, 'script.main') %>"></script>
  </body>
</html>
